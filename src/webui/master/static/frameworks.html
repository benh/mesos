<ol class="breadcrumb">
  <li><a class="badge badge-type" href="#">Master</a></li>
  <li class="active">
    <span class="badge badge-type">Frameworks</span>
  </li>
</ol>

<table m-table table-content="frameworks" title="Active Frameworks"
  class="table table-striped table-bordered table-condensed">
  <thead>
    <tr>
      <th data-key="id">ID</th>
      <th data-key="hostname">Host</th>
      <th data-key="user">User</th>
      <th data-key="name">Name</th>
      <th data-key="roles">Roles</th>
      <th data-key="principal">Principal</th>
      <th data-key="tasks.length">Active Tasks</th>
      <th data-key="allocated_cpus">CPUs</th>
      <th data-key="allocated_gpus">GPUs</th>
      <th data-key="allocated_mem">Mem</th>
      <th data-key="allocated_disk">Disk</th>
      <th data-key="max_share">Max Share</th>
      <th data-key="registered_time">Registered</th>
      <th data-key="reregistered_time">Re-Registered</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="framework in $data | filter: { active: true }">
      <td>
        <a href="{{'#/frameworks/' + framework.framework_info.id.value}}">
          {{framework.framework_info.id.value | truncateMesosID}}
        </a>
        <button class="btn btn-xs btn-toggle btn-default"
                clipboard
                data-clipboard-text="{{framework.framework_info.id.value}}"
                tooltip="Copy ID"
                tooltip-placement="right"
                tooltip-trigger="clipboardhover">
        </button>
      </td>
      <td ng-switch="!!framework.framework_info.webui_url">
        <a ng-href="{{framework.framework_info.webui_url}}" ng-switch-when="true">{{framework.framework_info.hostname}}</a>
        <span ng-switch-when="false">{{framework.framework_info.hostname}}</span>
      </td>
      <td>{{framework.framework_info.user}}</td>
      <td>{{framework.framework_info.name}}</td>
      <!-- TODO(bmahler): This doesn't display well when there are a lot
           of roles (e.g. a large organization with a lot of teams &
           services, using roles like /engineering/frontend/webserver, etc).
           Figure out a way to display this without bloating the table. -->
      <td>{{framework.framework_info.roles.toString()}}</td>
      <td>{{framework.framework_info.principal}}</td>
      <td>{{framework.tasks.length | number}}</td>
      <td>{{framework.allocated_cpus | number}}</td>
      <td>{{framework.allocated_gpus | number}}</td>
      <td>{{framework.allocated_mem * (1024 * 1024) | dataSize}}</td>
      <td>{{framework.allocated_disk * (1024 * 1024) | dataSize}}</td>
      <td>{{framework.max_share * 100 | number}}%</td>
      <td ng-show="!framework.registered_time">-</td>
      <td ng-show="framework.registered_time">
        <m-timestamp value="{{framework.registered_time.nanoseconds / 1000000}}"></m-timestamp>
      </td>
      <td ng-show="!framework.reregistered_time">-</td>
      <td ng-show="framework.reregistered_time">
        <m-timestamp value="{{framework.reregistered_time.nanoseconds / 1000000}}"></m-timestamp>
      </td>
    </tr>
  </tbody>
</table>

<table m-table table-content="frameworks" title="Inactive Frameworks"
       class="table table-striped table-bordered table-condensed">
  <thead>
  <tr>
    <th data-key="id">ID</th>
    <th data-key="hostname">Host</th>
    <th data-key="user">User</th>
    <th data-key="name">Name</th>
    <th data-key="roles">Roles</th>
    <th data-key="principal">Principal</th>
    <th data-key="tasks.length">Active Tasks</th>
    <th data-key="allocated_cpus">CPUs</th>
    <th data-key="allocated_gpus">GPUs</th>
    <th data-key="allocated_mem">Mem</th>
    <th data-key="allocated_disk">Disk</th>
    <th data-key="max_share">Max Share</th>
    <th data-key="registered_time">Registered</th>
    <th data-key="reregistered_time">Re-Registered</th>
  </tr>
  </thead>
  <tbody>
  <tr ng-repeat="framework in $data | filter: { active: false }">
    <td>
      <a href="{{'#/frameworks/' + framework.framework_info.id.value}}">
        {{framework.framework_info.id.value | truncateMesosID}}
      </a>
      <button class="btn btn-xs btn-toggle btn-default"
              clipboard
              data-clipboard-text="{{framework.framework_info.id.value}}"
              tooltip="Copy ID"
              tooltip-placement="right"
              tooltip-trigger="clipboardhover">
      </button>
    </td>
    <td ng-switch="!!framework.framework_info.webui_url">
      <a ng-href="{{framework.framework_info.webui_url}}" ng-switch-when="true">{{framework.framework_info.hostname}}</a>
      <span ng-switch-when="false">{{framework.framework_info.hostname}}</span>
    </td>
    <td>{{framework.framework_info.user}}</td>
    <td>{{framework.framework_info.name}}</td>
    <!-- TODO(bmahler): This doesn't display well when there are a lot
         of roles (e.g. a large organization with a lot of teams &
         services, using roles like /engineering/frontend/webserver, etc).
         Figure out a way to display this without bloating the table. -->
    <td>{{framework.framework_info.roles.toString()}}</td>
    <td>{{framework.framework_info.principal}}</td>
    <td>{{framework.tasks.length | number}}</td>
    <td>{{framework.allocated_cpus | number}}</td>
    <td>{{framework.allocated_gpus | number}}</td>
    <td>{{framework.allocated_mem * (1024 * 1024) | dataSize}}</td>
    <td>{{framework.allocated_disk * (1024 * 1024) | dataSize}}</td>
    <td>{{framework.max_share * 100 | number}}%</td>
    <td ng-show="!framework.registered_time">-</td>
    <td ng-show="framework.registered_time">
      <m-timestamp value="{{framework.registered_time.nanoseconds / 1000000}}"></m-timestamp>
    </td>
    <td ng-show="!framework.reregistered_time">-</td>
    <td ng-show="framework.reregistered_time">
      <m-timestamp value="{{framework.reregistered_time.nanoseconds / 1000000}}"></m-timestamp>
    </td>
  </tr>
  </tbody>
</table>

<table m-table table-content="completed_frameworks" title="Completed Frameworks"
  class="table table-striped table-bordered table-condensed">
  <thead>
    <tr>
      <th data-key="id">ID</th>
      <th data-key="hostname">Host</th>
      <th data-key="user">User</th>
      <th data-key="name">Name</th>
      <th data-key="roles">Roles</th>
      <th data-key="principal">Principal</th>
      <th data-key="registered_time">Registered</th>
      <th data-key="unregistered_time">Unregistered</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="framework in $data">
      <td>
        <a href="{{'#/frameworks/' + framework.framework_info.id.value}}" title="{{framework.framework_info.id.value}}">
          {{framework.framework_info.id.value | truncateMesosID}}
        </a>
        <button class="btn btn-xs btn-toggle btn-default"
                clipboard
                data-clipboard-text="{{framework.framework_info.id.value}}"
                tooltip="Copy ID"
                tooltip-placement="right"
                tooltip-trigger="clipboardhover">
        </button>
      </td>
      <td>{{framework.framework_info.hostname}}</td>
      <td>{{framework.framework_info.user}}</td>
      <td>{{framework.framework_info.name}}</td>
      <!-- TODO(bmahler): This doesn't display well when there are a lot
           of roles (e.g. a large organization with a lot of teams &
           services, using roles like /engineering/frontend/webserver, etc).
           Figure out a way to display this without bloating the table. -->
      <td>{{framework.framework_info.roles.toString()}}</td>
      <td>{{framework.framework_info.principal}}</td>
      <td>
        <m-timestamp value="{{framework.registered_time.nanoseconds / 1000000}}"></m-timestamp>
      </td>
      <td>
        <m-timestamp value="{{framework.unregistered_time.nanoseconds / 1000000}}"></m-timestamp>
      </td>
    </tr>
  </tbody>
</table>
